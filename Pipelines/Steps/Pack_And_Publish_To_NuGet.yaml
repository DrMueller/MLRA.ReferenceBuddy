parameters:
    FolderToPack: ''
    ToNugetOrg: false

steps:
- task: DotNetCoreCLI@2
  displayName: Pack
  inputs:
    command: pack
    packagesToPack: '**/${{parameters.FolderToPack}}/*.csproj'
    packDirectory: '$(Build.ArtifactStagingDirectory)/output'
    versioningScheme: byBuildNumber

- task: DotNetCoreCLI@2
  displayName: Push Nuget Package
  inputs:
    command: custom
    custom: nuget
    arguments: >
      push $(Build.ArtifactStagingDirectory)\output\*.nupkg
      -s https://api.nuget.org/v3/index.json
      -k $(NugetApiKey)
